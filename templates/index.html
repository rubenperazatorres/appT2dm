<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Predicción con ANFIS</title>
</head>
<body>
  <h1>Predicción de Riesgo de Diabetes</h1>
  <form id="formulario">
    <label for="sexo">Sexo (0=Hombre, 1=Mujer):</label>
    <input type="number" id="sexo" step="1" required><br>

    <label for="edad">Edad:</label>
    <input type="number" id="edad" required><br>

    <label for="imc">IMC:</label>
    <input type="number" id="imc" step="0.01" required><br>

    <label for="hemoglobina">Hemoglobina:</label>
    <input type="number" id="hemoglobina" step="0.1" required><br>

    <label for="neutrofilos">Neutrófilos:</label>
    <input type="number" id="neutrofilos" step="0.1" required><br>

    <label for="eritrocitos">Eritrocitos:</label>
    <input type="number" id="eritrocitos" step="0.1" required><br>

    <label for="hematocrito">Hematocrito:</label>
    <input type="number" id="hematocrito" step="0.1" required><br>

    <label for="mch">MCH:</label>
    <input type="number" id="mch" step="0.1" required><br>

    <label for="mcv">MCV:</label>
    <input type="number" id="mcv" step="0.1" required><br>

    <label for="eosinofilos">Eosinófilos:</label>
    <input type="number" id="eosinofilos" step="0.1" required><br>

    <label for="rdw">RDW-CV:</label>
    <input type="number" id="rdw" step="0.1" required><br>

    <label for="linfocitos">Linfocitos:</label>
    <input type="number" id="linfocitos" step="0.1" required><br>

    <label for="monocitos">Monocitos:</label>
    <input type="number" id="monocitos" step="0.1" required><br><br>

    <button type="submit">Predecir</button>
  </form>

  <h2 id="resultado"></h2>

  <script>
    document.getElementById("formulario").addEventListener("submit", function(event) {
      event.preventDefault();

      const datos = [
        Number(document.getElementById("sexo").value),
        Number(document.getElementById("edad").value),
        Number(document.getElementById("imc").value),
        Number(document.getElementById("neutrofilos").value),
        Number(document.getElementById("hemoglobina").value),
        Number(document.getElementById("eritrocitos").value),
        Number(document.getElementById("hematocrito").value),
        Number(document.getElementById("mch").value),
        Number(document.getElementById("mcv").value),
        Number(document.getElementById("eosinofilos").value),
        Number(document.getElementById("rdw").value),
        Number(document.getElementById("linfocitos").value),
        Number(document.getElementById("monocitos").value)
      ];

      fetch("/predecir", {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({ features: datos })
      })
      .then(response => {
        if (!response.ok) throw new Error("Error en la predicción");
        return response.json();
      })
      .then(data => {
        document.getElementById("resultado").textContent =
          "Predicción: " + JSON.stringify(data.prediction);
      })
      .catch(error => {
        document.getElementById("resultado").textContent = "Error: " + error.message;
      });
    });
  </script>
</body>
</html>
